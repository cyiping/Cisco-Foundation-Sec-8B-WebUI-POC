# Cisco Foundation-Sec-8B WebUI POC

![Python](https://img.shields.io/badge/Python-3.10+-blue.svg) ![Gradio](https://img.shields.io/badge/Gradio-Interface-orange.svg) ![Model](https://img.shields.io/badge/Cisco-Foundation--Sec--8B-green.svg) ![License](https://img.shields.io/badge/License-Apache%202.0-lightgrey.svg)

## ğŸ“– å°ˆæ¡ˆç°¡ä»‹ (Introduction)

æœ¬å°ˆæ¡ˆæ˜¯ä¸€å€‹åŸºæ–¼ Web çš„äº’å‹•å¼æ¦‚å¿µé©—è­‰ (POC) å·¥å…·ï¼Œæ—¨åœ¨å±•ç¤ºèˆ‡æ¸¬è©¦ **Cisco Foundation-Sec-8B** æ¨¡å‹çš„å¼·å¤§èƒ½åŠ›ã€‚é€é Gradio å»ºç«‹çš„ä½¿ç”¨è€…ä»‹é¢ï¼Œè³‡å®‰åˆ†æå¸«èˆ‡é–‹ç™¼äººå“¡å¯ä»¥è¼•é¬†åœ°èˆ‡è©²æ¨¡å‹äº’å‹•ï¼Œé€²è¡Œ CVE æ¼æ´åˆ†æã€ä¿®è£œå»ºè­°ç”ŸæˆåŠå¨è„…æƒ…è³‡è§£è®€ã€‚

### åƒè€ƒé€£çµ : 
* https://huggingface.co/fdtn-ai/Foundation-Sec-8B

æ­¤ç¨‹å¼ç¢¼è¨­è¨ˆç”¨æ–¼æ”¯æ´ GPU åŠ é€Ÿç’°å¢ƒï¼ˆå¦‚ Kaggle Notebook æˆ–æœ¬åœ° CUDA ç’°å¢ƒï¼‰ï¼Œä¸¦åˆ©ç”¨ 4-bit é‡åŒ–æŠ€è¡“å„ªåŒ–æ¨è«–æ•ˆç‡ã€‚

## ğŸ¤– é—œæ–¼æ¨¡å‹ (About the Model)

**Cisco Foundation-Sec-8B** æ˜¯ Cisco å°ˆç‚ºè³‡å®‰ç¶­é‹ (SecOps) å»ºæ§‹çš„é ˜åŸŸç‰¹å®šå¤§å‹èªè¨€æ¨¡å‹ (LLM)ã€‚

* **æ¶æ§‹åŸºç¤**ï¼šåŸºæ–¼ Llama 3.1 æ¶æ§‹ï¼Œå¾é›¶é–‹å§‹é‡å°è³‡å®‰é ˜åŸŸé€²è¡Œå„ªåŒ–ã€‚
* **è¨“ç·´è³‡æ–™**ï¼šåŒ…å« Cisco Talos è¶…é 20 å¹´çš„å¨è„…æƒ…è³‡ã€CVE æ¼æ´è³‡æ–™åº«ã€äº‹ä»¶å›æ‡‰æ–‡ä»¶ (IR) åŠè³‡å®‰æ¨™æº– (å¦‚ MITRE ATT&CK, NIST)ã€‚
* **æ ¸å¿ƒèƒ½åŠ›**ï¼š
    * **SOC åŠ é€Ÿ**ï¼šè‡ªå‹•åŒ–è­¦å ±åˆ†é¡ã€äº‹ä»¶æ‘˜è¦ã€‚
    * **ä¸»å‹•å¨è„…é˜²ç¦¦**ï¼šæ¨¡æ“¬æ”»æ“Šè·¯å¾‘ã€å„ªå…ˆè™•ç†æ¼æ´ã€‚
    * **å·¥ç¨‹è³¦èƒ½**ï¼šé©—è­‰é…ç½®æª”æ¡ˆã€è©•ä¼°åˆè¦è¦æ±‚ã€‚
* **æ•ˆèƒ½**ï¼šåœ¨ CTIBench ç­‰åŸºæº–æ¸¬è©¦ä¸­ï¼Œè¡¨ç¾å„ªæ–¼ GPT-4 åŠ Llama 3.1 70Bã€‚

## ğŸ“š Cisco Foundation AI Cookbook

æœ¬å°ˆæ¡ˆå…§å« **Cisco Foundation AI Cookbook**ï¼Œé€™æ˜¯ä¸€å€‹å¼•å°ä½¿ç”¨è€…ä¸Šæ‰‹ Cisco Foundation AI æ¨¡å‹çš„å¯¦ç”¨æŒ‡å—ã€‚å®ƒæ¶µè“‹äº†å¤šç¨®è³‡å®‰ç›¸é—œçš„ä½¿ç”¨æ¡ˆä¾‹ã€ä½ˆç½²é¸é …ä»¥åŠå¾®èª¿ (Finetuning) ç­‰å¯¦å‹™æ“ä½œã€‚

### ä¸»è¦å…§å®¹ï¼š
1.  **[Quickstarts](./cookbook/1_quickstarts)**ï¼šå¿«é€Ÿä¸‹è¼‰ä¸¦é–‹å§‹ä½¿ç”¨æ¨¡å‹çš„å…¥é–€æŒ‡å—ã€‚
2.  **[Examples](./cookbook/2_examples)**ï¼šå¤šå€‹è³‡å®‰ä½¿ç”¨æ¡ˆä¾‹ï¼Œå±•ç¤ºå¦‚ä½•å……åˆ†åˆ©ç”¨æ¨¡å‹èƒ½åŠ›ã€‚
3.  **[Adoptions](./cookbook/3_adoptions)**ï¼šåŒ…å«å¾®èª¿ (Finetuning)ã€æ¨¡å‹é‡åŒ– (Quantization) åŠä½ˆç½² (Deployment) è…³æœ¬ã€‚
4.  **[Documents](./cookbook/4_documents)**ï¼šåŒ…å«å¸¸è¦‹å•é¡Œ (FAQ) èˆ‡åƒè€ƒè³‡æºã€‚

æ›´å¤šè©³ç´°è³‡è¨Šè«‹åƒè€ƒ [cookbook ç›®éŒ„](./cookbook)ã€‚

## ğŸ› ï¸ åŠŸèƒ½ç‰¹é» (Features)

* **ç›´è¦ºå¼ Web ä»‹é¢**ï¼šä½¿ç”¨ Gradio æ§‹å»ºï¼Œç„¡éœ€ç·¨å¯«ç¨‹å¼ç¢¼å³å¯é€²è¡Œå•ç­”ã€‚
* **åƒæ•¸å‹•æ…‹èª¿æ•´**ï¼š
    * `Max New Tokens`ï¼šæ§åˆ¶ç”Ÿæˆå ±å‘Šçš„é•·åº¦ï¼ˆé©ç”¨æ–¼çŸ­æ‘˜è¦æˆ–å®Œæ•´å ±å‘Šï¼‰ã€‚
    * `Temperature`ï¼šèª¿æ•´ç”Ÿæˆçš„éš¨æ©Ÿæ€§ï¼ˆè³‡å®‰åˆ†æå»ºè­°è¨­ç‚ºè¼ƒä½å€¼ä»¥æ±‚ç²¾æº–ï¼‰ã€‚
    * `Top-p`ï¼šæ§åˆ¶è©å½™æ¡æ¨£ç¯„åœã€‚
* **è³‡æºå„ªåŒ–**ï¼šè‡ªå‹•ä½¿ç”¨ `bitsandbytes` é€²è¡Œ 4-bit é‡åŒ–è¼‰å…¥ï¼Œå¤§å¹…é™ä½ VRAM éœ€æ±‚ã€‚
* **è‡ªå‹•ç´€éŒ„ (Logging)**ï¼šæ‰€æœ‰æå•ã€æ¨¡å‹å›æ‡‰åŠç”Ÿæˆæ™‚é–“å°‡è‡ªå‹•è¨˜éŒ„æ–¼ `security_log.csv`ï¼Œä¾¿æ–¼å¾ŒçºŒå¯©è¨ˆæˆ–å¾®èª¿åˆ†æã€‚

## ğŸ“‹ ç’°å¢ƒéœ€æ±‚ (Prerequisites)

* **Pythonç‰ˆæœ¬**ï¼š3.8 ä»¥ä¸Š
* **ç¡¬é«”éœ€æ±‚**ï¼šNVIDIA GPU (å»ºè­° VRAM >= 12GB ä»¥æµæš¢é‹è¡Œ 4-bit é‡åŒ–ç‰ˆæœ¬)
* **ä½œæ¥­ç³»çµ±**ï¼šLinux (æ¨è–¦ Ubuntu) æˆ– Windows (éœ€é…ç½® CUDA ç’°å¢ƒ)

## ğŸš€ å®‰è£èˆ‡åŸ·è¡Œ (Installation & Usage)

### 1. å®‰è£ç›¸ä¾å¥—ä»¶
æœ¬å°ˆæ¡ˆä¾è³´ `transformers`, `gradio`, `bitsandbytes` ç­‰æ ¸å¿ƒå¥—ä»¶ã€‚ç¨‹å¼ç¢¼ä¸­å·²å…§å»ºå®‰è£å‡½å¼ï¼Œæˆ–å¯æ‰‹å‹•åŸ·è¡Œï¼š

```bash
pip install sqlalchemy>=1.4 transformers accelerate bitsandbytes gradio
```

### 2. åŸ·è¡Œç¨‹å¼
æœ¬å°ˆæ¡ˆæä¾›å¤šå€‹ç‰ˆæœ¬çš„è…³æœ¬ï¼Œæ‚¨å¯ä»¥æ ¹æ“šéœ€æ±‚é¸æ“‡åŸ·è¡Œï¼š

*   **åŸ·è¡ŒåŸºç¤ç‰ˆï¼š**
    ```bash
    python app1.py
    ```
*   **åŸ·è¡Œå„ªåŒ–ç‰ˆ (æ¨è–¦)ï¼š**
    ```bash
    python app2.py
    ```
*   **åŸ·è¡Œ Kaggle å°ˆç”¨ç‰ˆï¼š**
    ```bash
    python app3.py
    ```
(è¨»ï¼šè‹¥åœ¨ Kaggle æˆ– Colab ç’°å¢ƒä¸­ï¼Œè«‹ç›´æ¥åŸ·è¡Œ Notebook cell)

### 3. æ“ä½œä»‹é¢
* **å•Ÿå‹•å¾Œ**ï¼šConsole æœƒé¡¯ç¤º Gradio çš„æœ¬åœ° URL (ä¾‹å¦‚ http://127.0.0.1:7860) æˆ–å…¬é–‹é€£çµ (Share Link)ã€‚
* **Security Prompt (æå•)**ï¼šè¼¸å…¥æ‚¨æƒ³è©¢å•çš„è³‡å®‰å•é¡Œï¼Œä¾‹å¦‚ï¼š"How to patch the CVE-2024-6387 vulnerability?"
* **èª¿æ•´åƒæ•¸**ï¼šæ ¹æ“šéœ€æ±‚èª¿æ•´ Temperature æˆ– Token é•·åº¦ã€‚
* **Submit (æäº¤)**ï¼šé»æ“ŠæŒ‰éˆ•ç”Ÿæˆåˆ†æçµæœã€‚
* **Flag (æ¨™è¨˜)**ï¼šè‹¥ç™¼ç¾å›æ‡‰æœ‰èª¤ï¼Œå¯é»æ“Š Flag ä¿å­˜ä»¥ä¾›å¾ŒçºŒæ¨¡å‹å„ªåŒ–ä½¿ç”¨ã€‚

## âš™ï¸ åƒæ•¸èªªæ˜ (Configuration)

| åƒæ•¸åç¨± | é è¨­å€¼ | å»ºè­°è¨­å®š | èªªæ˜ |
| :--- | :--- | :--- | :--- |
| Max New Tokens | 2048 | 512 (æ‘˜è¦) / 2048 (å ±å‘Š) | æ±ºå®šæ¨¡å‹å›æ‡‰çš„æœ€å¤§é•·åº¦ã€‚ |
| Temperature | 0.4 | 0.1 - 0.4 | å€¼è¶Šä½ï¼Œå›æ‡‰è¶Šå›ºå®šä¸”ç²¾ç¢ºï¼›å€¼è¶Šé«˜ï¼Œå‰µæ„æ€§è¶Šé«˜ã€‚è³‡å®‰ä»»å‹™å»ºè­°ä½æº«ã€‚ |
| Top-p | 0.9 | 0.9 | æ ¸å¿ƒæ¡æ¨£åƒæ•¸ï¼Œä¿æŒé è¨­å³å¯ç²å¾—ç©©å®šè¼¸å‡ºã€‚ |

## ğŸ“„ è…³æœ¬èªªæ˜èˆ‡å·®ç•° (Script Descriptions & Differences)

æœ¬å°ˆæ¡ˆæä¾›å¤šå€‹ç‰ˆæœ¬çš„åŸ·è¡Œè…³æœ¬ï¼Œåˆ†åˆ¥é‡å°ä¸åŒçš„ä½¿ç”¨æƒ…å¢ƒé€²è¡Œå„ªåŒ–ï¼š

| æª”æ¡ˆåç¨± | ç‰ˆæœ¬èªªæ˜ | æ ¸å¿ƒç‰¹é» | é©ç”¨å ´æ™¯ |
| :--- | :--- | :--- | :--- |
| **app1.py** | åŸºç¤ç‰ˆ (Basic) | ç°¡å–®ç›´è¦ºçš„ Pipeline å¯¦ä½œï¼Œæä¾›åŸºç¤ Gradio ä»‹é¢ã€‚ | å¿«é€Ÿæ¸¬è©¦æ¨¡å‹åŸºç¤èƒ½åŠ›ã€é«˜è¦æ ¼ GPU ç’°å¢ƒã€‚ |
| **app2.py** | å„ªåŒ–ç‰ˆ (Anti-Loop Fix) | åŠ å…¥ **System Prompt**ã€**é‡è¤‡æ‡²ç½° (Repetition Penalty)** åŠ **T4 GPU é‡åŒ–å„ªåŒ–**ã€‚ | è§£æ±ºæ¨¡å‹é‡è¤‡è·³é‡å•é¡Œã€è³‡æºå—é™ç’°å¢ƒ (å¦‚ Kaggle T4)ã€éœ€è¦æ›´ç²¾æº–è³‡å®‰å°ˆå®¶å£å»æ™‚ã€‚ |
| **app3.py** | Kaggle å°ˆç”¨ç‰ˆ (Kaggle T4) | **è‡ªå‹•å®‰è£ç’°å¢ƒ**ã€**Kaggle Secrets æ”¯æ´**ã€**çµæ§‹åŒ–å ±å‘Šæ¨¡æ¿**ã€‚ | åœ¨ Kaggle Notebook ç’°å¢ƒä¸­å¿«é€Ÿä½ˆç½²ã€éœ€è¦æ ¼å¼åŒ–è³‡å®‰å ±å‘Šæ™‚ã€‚ |

#### `app2.py` çš„ä¸»è¦æ”¹é€²ï¼š
*   **é˜²æ­¢é‡è¤‡è·³é‡ (Anti-Loop)**ï¼šé€é `repetition_penalty=1.15` åƒæ•¸ï¼Œæœ‰æ•ˆé¿å…æ¨¡å‹åœ¨ç”Ÿæˆé•·æ–‡æœ¬æ™‚é™·å…¥ç„¡é™å¾ªç’°ã€‚
*   **è§’è‰²è¨­å®š (System Prompt)**ï¼šé è¨­åŠ å…¥ "You are a senior cyber security Engineer" çš„æŒ‡ä»¤ï¼Œè®“å›æ‡‰æ›´å…·å°ˆæ¥­è³‡å®‰åˆ†æé¢¨æ ¼ã€‚
*   **ç¡¬é«”å„ªåŒ–**ï¼šé‡å° Kaggle T4 GPU é€²è¡Œ `BitsAndBytesConfig` ç´°ç¯€èª¿æ•´ï¼ˆå¦‚ `nf4` é‡åŒ–èˆ‡é›™é‡é‡åŒ–ï¼‰ï¼Œç¢ºä¿åœ¨ 16GB VRAM ä¸‹ç©©å®šé‹è¡Œã€‚
*   **Tokenizer ä¿®æ­£**ï¼šè‡ªå‹•è™•ç† Llama æ¶æ§‹å¸¸è¦‹çš„ Padding Token å•é¡Œï¼Œæå‡ç”Ÿæˆç©©å®šæ€§ã€‚

#### `app3.py` çš„ä¸»è¦æ”¹é€²ï¼š
*   **è‡ªå‹•åŒ–ç’°å¢ƒé…ç½®**ï¼šå…§å»º `install_dependencies()` é‚è¼¯ï¼Œè‡ªå‹•æª¢æŸ¥ä¸¦å®‰è£å¿…è¦å¥—ä»¶ï¼Œå¯¦ç¾é–‹ç®±å³ç”¨ã€‚
*   **Kaggle Secrets æ•´åˆ**ï¼šæ”¯æ´å¾ Kaggle Secrets è‡ªå‹•è®€å– `HF_TOKEN`ï¼Œç„¡éœ€åœ¨ç¨‹å¼ç¢¼ä¸­ç¡¬ç·¨ç¢¼é‡‘é‘°ã€‚
*   **çµæ§‹åŒ–è¼¸å‡º (Completion Style)**ï¼šæ¡ç”¨ `[Security Analysis Report]` æ¨¡æ¿å¼•å°æ¨¡å‹ï¼Œç”ŸæˆåŒ…å« Topicã€Dateã€Analyst ç­‰æ¬„ä½çš„æ ¼å¼åŒ–å ±å‘Šã€‚
*   **è·¯å¾‘èˆ‡å­˜å–å„ªåŒ–**ï¼šè‡ªå‹•å°‡ Log å„²å­˜æ–¼ Kaggle å¯å¯«å…¥è·¯å¾‘ (`/kaggle/working`)ï¼Œä¸¦é è¨­é–‹å•Ÿ `share=True` ä»¥ç”¢ç”Ÿå¤–éƒ¨å­˜å–é€£çµã€‚

#### ğŸ”‘ å¦‚ä½•åœ¨ Kaggle è¨­å®š HF_TOKEN (Kaggle Secrets)
ç‚ºäº†è®“ `app3.py` èƒ½è‡ªå‹•ç™»å…¥ Hugging Face ä¸¦ä¸‹è¼‰æ¨¡å‹ï¼Œè«‹æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿæ“ä½œï¼š
1.  **å–å¾— Token**ï¼šå‰å¾€ [Hugging Face Settings](https://huggingface.co/settings/tokens) å»ºç«‹ä¸€å€‹å…·æœ‰ `Read` æ¬Šé™çš„ Access Tokenã€‚
2.  **é–‹å•Ÿ Secrets é¢æ¿**ï¼šåœ¨ Kaggle Notebook ç·¨è¼¯å™¨é ‚éƒ¨é¸å–®ï¼Œé»æ“Š **Add-ons** -> **Secrets**ã€‚
3.  **æ–°å¢ Secret**ï¼š
    *   **Label**: è¼¸å…¥ `HF_TOKEN`ã€‚
    *   **Value**: è²¼ä¸Šæ‚¨çš„ Hugging Face Access Tokenã€‚
4.  **é€£çµè‡³ Notebook**ï¼šé»æ“Š **Add secret** å¾Œï¼Œç¢ºä¿è©² Secret æ—é‚Šçš„ **Attached** å‹¾é¸æ¡†å·²å‹¾é¸ã€‚
5.  **é–‹å•Ÿç¶²è·¯**ï¼šç¢ºä¿ Notebook å³å´é¢æ¿ (Settings) ä¸­çš„ **Internet** é¸é …å·²åˆ‡æ›ç‚º **On**ã€‚

## ğŸ“‚ æª”æ¡ˆçµæ§‹ (File Structure)

```plaintext
â”œâ”€â”€ app1.py               # åŸºç¤ç‰ˆåŸ·è¡Œç¨‹å¼ç¢¼
â”œâ”€â”€ app2.py               # å„ªåŒ–ç‰ˆåŸ·è¡Œç¨‹å¼ç¢¼ (å« Anti-Loop ä¿®æ­£)
â”œâ”€â”€ app3.py               # Kaggle å°ˆç”¨ç‰ˆ (å«è‡ªå‹•å®‰è£èˆ‡ Secrets æ”¯æ´)
â”œâ”€â”€ cookbook/             # Cisco Foundation AI Cookbook (ç¯„ä¾‹èˆ‡æŒ‡å—)
â”œâ”€â”€ security_log.csv      # (è‡ªå‹•ç”Ÿæˆ) äº’å‹•ç´€éŒ„æª”
â””â”€â”€ README.md             # èªªæ˜æ–‡ä»¶
```

![a](image-1.png)

## âš ï¸ å…è²¬è²æ˜ (Disclaimer)
æœ¬å°ˆæ¡ˆç‚º Proof of Concept (POC) æ€§è³ªï¼Œæ—¨åœ¨å±•ç¤º Cisco Foundation-Sec-8B æ¨¡å‹ä¹‹åŠŸèƒ½ã€‚ç”Ÿæˆçš„è³‡å®‰å»ºè­°åƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›éƒ¨ç½²è£œä¸æˆ–åŸ·è¡Œè³‡å®‰æ±ºç­–å‰ï¼Œè«‹å‹™å¿…åƒç…§å®˜æ–¹ä¾›æ‡‰å•† (Vendor) çš„æ­£å¼å…¬å‘Šèˆ‡æ¸¬è©¦é©—è­‰ã€‚

Based on Cisco AI Defense & Foundation AI Security Presentation (2025).